<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreezeMeds | Cadastro</title>
    <script src="./js/sessao.js"></script>
    <link rel="stylesheet" href="./css/StyleCadastro.css">

    <link rel="preconnect" href=https://fonts.googleapis.com>

    <link rel="preconnect" href=https://fonts.gstatic.com crossorigin>

    <link href=https://fonts.googleapis.com/css2?family=ABeeZee:ital@0;1&family=Sora:wght@100..800&display=swap

        rel="stylesheet">
</head>
<body>
<div class="ContainerMae">
    <div class="ContainerPai">
        <div class="ConteudoCadastro">
            <h1>Cadastro Empresa</h1>

            <div class="InputsCadastro">
                <p style="display: flex; justify-content: flex-start; align-items: center;
                width: 90%;">Nome</p>
                <input id="input_nome" class="input" type="text">
                <p style="display: flex; justify-content: flex-start; align-items: center;
                width: 90%;">CNPJ</p>
                <input id="input_cpnj" class="input" type="text">
                <p style="display: flex; justify-content: flex-start; align-items: center;
                width: 90%;">Email</p>
                <input id="input_email" class="input" type="text">
                <p style="display: flex; justify-content: flex-start; align-items: center;
                width: 90%;">Senha</p>
                <input id="input_senha" class="input" type="password">
                <p style="display: flex; justify-content: flex-start; align-items: center;
                width: 90%;">Confirmar Senha</p>
                <input id="input_ConfirmarSenha" class="input" type="password">
            </div>

            <p style="display: flex; justify-content: flex-start; align-items: center; width: 90%; font-size: 20px;">Já tem Cadastro? <a href="login.html" >Faça login</a></p>
           <button onclick="cadastrar()" class="Btn">Cadastrar</button>
        </div>
    </div>
</div>
</body>
</html>
<script>
  function cadastrar() {
    var nomeVar = input_nome.value;
    var cnpjVar = input_cpnj.value;
    var emailVar = input_email.value;
    var senhaVar = input_senha.value;
    var confirmacaoSenhaVar = input_ConfirmarSenha.value;

    if (
      nomeVar == "" ||
      emailVar == "" ||
      senhaVar == "" ||
      confirmacaoSenhaVar == "" ||
      cnpjVar == ""
    ) {
      alert(`Preencha todos os campos para continuar com o cadastro!`);
      return false;
    }

    fetch("/empresas/cadastrar", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        // crie um atributo que recebe o valor recuperado aqui
        // Agora vá para o arquivo routes/usuario.js
        nomeServer: nomeVar,
        emailServer: emailVar,
        senhaServer: senhaVar,
        cnpjServer: cnpjVar
      }),
    })
      .then(function (resposta) {
        console.log("resposta: ", resposta);

        if (resposta.ok) {

            alert(`Cadastro realizado com sucesso! Redirecionando para tela de Login...`);

          setTimeout(() => {
            window.location = "cadastroUser.html";
          }, "2000");
        } else {
          alert(`Houve um erro ao tentar realizar o cadastro!`);
        }
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });

    return false;
  }
</script>